{"version":3,"sources":["webpack://ExploratoryMap/webpack/universalModuleDefinition","webpack://ExploratoryMap/webpack/bootstrap","webpack://ExploratoryMap/./asset/src/exploratory-text.js","webpack://ExploratoryMap/./asset/src/exploratory-text.scss?2386"],"names":["require","ExploratoryText","constructor","userOpts","self","defaultOpts","selector","color","options","Object","assign","block","document","querySelector","console","warn","svg","d3","select","append","side","sideInner","nav","highlights","annots","paths","init","getAnnot","index","getHighlight","querySelectorAll","drawConnection","context","highlight","annot","path","first","blockBounds","getBoundingClientRect","firstBounds","annotBounds","scrollTop","documentElement","annotX","right","left","annotY","y","height","top","firstX","firstY","moveTo","lineTo","showConnection","classList","add","forEach","elem","hideConnection","remove","scrollTo","length","sideBounds","navBounds","scrollBy","behavior","openAnnotation","closeAnnotation","positionAnnotations","e","sideInnerBounds","style","width","scrollHeight","body","bodyBounds","sideInnerHeight","bottom","window","innerHeight","position","x","resizeAnnotation","toggle","highlightElems","annotElems","pathElems","highlightIndex","i","annotBody","annotIndex","annotToggle","annotClose","appendChild","highlightStr","dataset","innerText","type","onmouseover","onmouseleave","onclick","parseInt","textArr","split","textLen","isNaN","setAttribute","innerHTML","join","preventDefault","onscroll","onresize","onload","inst"],"mappings":"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","file":"exploratory-text.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ExploratoryMap\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ExploratoryMap\"] = factory();\n\telse\n\t\troot[\"ExploratoryMap\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","require(\"./exploratory-text.scss\");\n\nclass ExploratoryText {\n\tconstructor(userOpts = {}) {\n\t\tconst self = this;\n\t\tlet defaultOpts = {\n\t\t\tselector: \".exploratory-text-block\",\n\t\t\tcolor: \"#0dae0b\"\n\t\t}\n\t\tthis.options = Object.assign(defaultOpts, userOpts);\n\n\t\tthis.block = document.querySelector(this.options.selector);\n\t\tif(!this.block) console.warn(\"No element matched the selector \\\"\"+this.options.selector+\"\\\"\");\n\t\tthis.svg = d3.select(this.block).append(\"svg\");\n\t\tthis.side = this.block.querySelector(\".et-side\");\n\t\tthis.sideInner = this.side.querySelector(\".et-side-inner\");\n\t\tthis.nav = document.querySelector(\"nav.fixed\");\n\t\tthis.highlights = [null];\n\t\tthis.annots = [null];\n\t\tthis.paths = [null];\n\t\tthis.init();\n\t}\n\n\tgetAnnot(index) {\n\t\treturn this.block.querySelector(\".et-annot[data-index='\"+index+\"']\");\n\t}\n\n\tgetHighlight(index) {\n\t\treturn this.block.querySelectorAll(\".et-highlight[data-index='\"+index+\"']\");\n\t}\n\n\tdrawConnection(context, highlight, annot, path) {\n\t\tif(!highlight || !annot || !path) return;\n\t\tconst first = highlight.querySelector(\".et-first\"),\n\t\t\t\t\tblockBounds = this.block.getBoundingClientRect(),\n\t\t\t\t\tfirstBounds = first.getBoundingClientRect(),\n\t\t\t\t\tannotBounds = annot.getBoundingClientRect(),\n\t\t\t\t\tscrollTop = document.documentElement.scrollTop,\n\t\t\t\t\tannotX = annotBounds.right - blockBounds.left,\n\t\t\t\t\tannotY = annotBounds.y + annotBounds.height/2 - blockBounds.top,\n\t\t\t\t\tfirstX = firstBounds.left - blockBounds.left,\n\t\t\t\t\tfirstY = firstBounds.y + firstBounds.height/2 - blockBounds.top;\n\t\tcontext.moveTo(annotX, annotY);\n\t\tcontext.lineTo(firstX, firstY);\n\t\treturn context;\n\t}\n\n\t// makeConnections() {\n\t\t// const self = this,\n\t\t// \t\t\twidth = this.block.clientWidth,\n\t\t// \t\t\theight = this.block.clientHeight;\n\t\t// this.svg.attr(\"width\", width)\n\t\t// \t\t\t\t.attr(\"height\", height);\n\t\t\n\t\t// this.highlights.forEach(function(highlight, i) {\n\t\t// \tlet annot = self.annots[i],\n\t\t// \t\t\tpath = self.paths[i];\n\n\t\t// \tif(!path) {\n\t\t// \t\tpath = self.svg.append(\"path\");\n\t\t// \t\tpath.attr(\"data-index\", i);\n\t\t// \t\tself.paths.push(path);\n\t\t// \t}\n\t\t\t// path.attr(\"d\", self.drawConnection(d3.path(), highlight, annot, path));\n\t// \t});\n\t// };\n\n\tshowConnection(index) {\n\t\tlet annot = this.getAnnot(index),\n\t\t\t\thighlight = this.getHighlight(index),\n\t\t\t\tpath = this.paths[index];\n\n\t\tif(annot) annot.classList.add(\"et-focus\");\n\t\thighlight.forEach(elem => elem.classList.add(\"et-focus\"));\n\t\t// if(path) path.classed(\"et-preview\", true);\n\t\t// this.makeConnections();\n\t}\n\n\thideConnection(index) {\n\t\tlet annot = this.getAnnot(index),\n\t\t\t\thighlight = this.getHighlight(index),\n\t\t\t\tpath = this.paths[index];\n\n\t\tif(annot) annot.classList.remove(\"et-focus\");\n\t\thighlight.forEach(elem => elem.classList.remove(\"et-focus\"));\n\t\t// if(path) path.classed(\"et-preview\", false);\n\t\t// this.makeConnections();\n\t};\n\n\tscrollTo(index) {\n\t\tconst annot = this.getAnnot(index),\n\t\t\t\t\tnav = document.querySelector(\"nav.fixed\"),\n\t\t\t\t\tsideInner = this.block.querySelector(\".et-side-inner\");\n\t\tif(!annot.length) return;\n\t\tconst annotBounds = annot.getBoundingClientRect(),\n\t\t\t\t\tsideBounds = sideInner.getBoundingClientRect(),\n\t\t\t\t\tnavBounds = nav.getBoundingClientRect();\n\t\tsideInner.scrollBy({\n\t\t\ttop: annotBounds.top - navBounds.height,\n\t\t\tbehavior: \"smooth\"\n\t\t});\n\t}\n\n\topenAnnotation(index) {\n\t\tconst annot = this.getAnnot(index),\n\t\t\t\t\thighlight = this.getHighlight(index),\n\t\t\t\t\tpath = this.paths[index];\n\t\t\n\t\tif(annot) annot.classList.add(\"et-open\");\n\t\thighlight.forEach(elem => elem.classList.add(\"et-open\"));\n\n\t\tthis.scrollTo(index);\n\t\tthis.side.classList.remove(\"et-side-empty\");\n\t\t\n\t\tthis.showConnection(index);\n\t}\n\n\tcloseAnnotation(index) {\n\t\tconst annot = this.getAnnot(index),\n\t\t\t\t\thighlight = this.getHighlight(index),\n\t\t\t\t\tpath = this.paths[index];\n\t\tif(annot) annot.classList.remove(\"et-open\");\n\t\thighlight.forEach(elem => elem.classList.remove(\"et-open\"));\n\n\t\tif(!this.side.querySelectorAll(\".et-open\").length) {\n\t\t\tthis.side.classList.add(\"et-side-empty\");\n\t\t}\n\t\tthis.hideConnection(index);\n\t}\n\n\tpositionAnnotations(e) {\n\t\tconst blockBounds = this.block.getBoundingClientRect(),\n\t\t\t\t\tnavBounds = this.nav.getBoundingClientRect(),\n\t\t\t\t\tsideBounds = this.side.getBoundingClientRect(),\n\t\t\t\t\tsideInnerBounds = this.sideInner.getBoundingClientRect();\n\t\t\t\n\t\tthis.sideInner.style.width = sideBounds.width + \"px\";\n\t\tthis.side.style.height = (this.sideInner.scrollHeight + sideBounds.top) + \"px\";\n\t\tif(blockBounds.y <= navBounds.height) {\n\t\t\tconst body = this.block.querySelector(\".et-body\"),\n\t\t\t\t\t\tbodyBounds = body.getBoundingClientRect();\n\t\t\tlet sideInnerHeight;\n\t\t\tif(bodyBounds.bottom < window.innerHeight) {\n\t\t\t\tsideInnerHeight = window.innerHeight - (window.innerHeight - bodyBounds.bottom) - navBounds.height;\n\t\t\t} else {\n\t\t\t\tsideInnerHeight = window.innerHeight - navBounds.height;\n\t\t\t}\n\t\t\tthis.sideInner.style.height = sideInnerHeight + \"px\";\t\n\t\t\tthis.sideInner.style.position = \"fixed\";\n\t\t\tthis.sideInner.style.left = sideBounds.x + \"px\";\n\t\t\tthis.sideInner.style.top = navBounds.height + \"px\";\n\t\t} else {\n\t\t\tthis.sideInner.style.position = \"absolute\";\n\t\t\tthis.sideInner.style.left = \"\";\n\t\t\tthis.sideInner.style.top = \"\";\n\t\t}\n\n\t\t\n\t}\n\n\tresizeAnnotation(annot) {\n\t\tannot.classList.toggle(\"et-less\");\n\t}\n\n\tinit() {\n\t\tconst self = this,\n\t\t\t\t\tsideInner = document.querySelector(\".et-side-inner\"),\n\t\t\t\t\thighlightElems = this.block.querySelectorAll(\".et-body a\"),\n\t\t\t\t\tannotElems = document.querySelectorAll(\".et-annot\"),\n\t\t\t\t\tpathElems = [];\n\t\tlet highlightIndex = 1;\n\n\t\tannotElems.forEach((annot, i) => {\n\t\t\tconst annotBody = annot.querySelector(\".et-annot-body\"),\n\t\t\t\t\t\tannotIndex = annot.querySelector(\".et-annot-index\"),\n\t\t\t\t\t\tannotToggle = annot.querySelector(\".et-annot-toggle\"),\n\t\t\t\t\t\tannotClose = annot.querySelector(\".et-annot-close\");\n\t\t\tannot = sideInner.appendChild(annot);\n\n\t\t\tconst highlightStr = annot.dataset.highlight;\n\n\t\t\thighlightElems.forEach(function(highlight, i) {\n\t\t\t\tif(highlightStr === highlight.innerText) {\n\t\t\t\t\tconst type = annot.dataset.type;\n\t\t\t\t\thighlight.classList.add(\"et-highlight\");\n\t\t\t\t\thighlight.dataset.type = type;\n\t\t\t\t\thighlight.dataset.index = highlightIndex;\n\t\t\t\t\tannot.dataset.index = highlightIndex;\n\t\t\t\t\tannotIndex.innerText = highlightIndex;\n\t\t\t\t\tself.annots[highlightIndex] = annot;\n\t\t\t\t\tself.highlights[highlightIndex] = highlight;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// annot.onclick = function(e) {\n\t\t\t// \te.preventDefault();\n\t\t\t// \tlet index = annot.dataset.index;\n\t\t\t// \tself.openAnnotation(index);\n\t\t\t// }\n\n\t\t\tannot.onmouseover = function(e) {\n\t\t\t\tconst index = annot.dataset.index;\n\t\t\t\tself.showConnection(index);\n\t\t\t}\n\n\t\t\tannot.onmouseleave = function(e) {\n\t\t\t\tconst index = annot.dataset.index;\n\t\t\t\tself.hideConnection(index);\n\t\t\t}\n\n\t\t\tannotToggle.onclick = function(e) {\n\t\t\t\tself.resizeAnnotation(annot);\n\t\t\t}\n\n\t\t\tannotClose.onclick = function(e) {\n\t\t\t\tconst index = annot.dataset.index;\n\t\t\t\tself.closeAnnotation(index);\n\t\t\t}\n\n\t\t\tannot.classList.remove(\"hidden\");\n\t\t\thighlightIndex++;\n\n\t\t});\n\n\t\thighlightElems.forEach(function(highlight, i) {\n\n\t\t\tconst type = highlight.dataset.type,\n\t\t\t\t\t\tindex = highlight.dataset.index,\n\t\t\t\t\t\tannot = self.getAnnot(index);\n\t\t\t\n\t\t\tif(annot) annot.classList.add(type);\n\n\t\t\tlet highlightStr = highlight.innerText,\n\t\t\t\t\thighlightIndex = parseInt(highlight.dataset.index),\n\t\t\t\t\ttextArr = highlightStr.split(\" \"),\n\t\t\t\t\ttextLen = textArr.length;\n\n\t\t\tif(isNaN(highlightIndex)) {\n\t\t\t\thighlight.setAttribute(\"class\", \"inactive\");\n\t\t\t} else {\n\t\t\t\tif(textArr.length > 1) {\n\t\t\t\t\ttextArr[0] = \"<span class='et-first'>\"+textArr[0]+\"</span>\";\n\t\t\t\t\ttextArr[textLen-1] = \"<span class='et-last' data-index-label='\"+(highlightIndex)+\"'>\"+textArr[textLen-1]+\"</span>\";\n\t\t\t\t} else {\n\t\t\t\t\ttextArr[0] = \"<span class='et-first et-last' data-index-label='\"+(highlightIndex)+\"'>\"+textArr[0]+\"</span>\";\n\t\t\t\t}\n\t\t\t\thighlight.innerHTML = textArr.join(\" \");\n\t\t\t}\n\n\t\t\thighlight.onclick = function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tlet index = highlight.dataset.index;\n\t\t\t\tself.openAnnotation(index);\n\t\t\t}\n\n\t\t\thighlight.onmouseover = function(e) {\n\t\t\t\tlet index = highlight.dataset.index;\n\t\t\t\tself.showConnection(index);\n\t\t\t}\n\n\t\t\thighlight.onmouseleave = function(e) {\n\t\t\t\tlet index = highlight.dataset.index;\n\t\t\t\tself.hideConnection(index);\n\t\t\t}\n\n\t\t});\n\n\t\tthis.side.onscroll = function(e) {\n\t\t\t// self.makeConnections();\n\t\t}\n\n\t\twindow.onscroll = function(e) {\n\t\t\tself.positionAnnotations();\n\t\t\t// self.makeConnections();\n\t\t}\n\n\t\twindow.onresize = function(e) {\n\t\t\tself.positionAnnotations();\n\t\t\t// self.makeConnections();\n\t\t}\n\n\t\tthis.positionAnnotations();\n\t\t// this.makeConnections();\n\t}\n\n};\n\nwindow.onload = function() {\n\tconst inst = new ExploratoryText();\n}","// extracted by mini-css-extract-plugin"],"sourceRoot":""}